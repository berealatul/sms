{
  "info": {
    "_postman_id": "sms-api-test-collection",
    "name": "SMS - Student Monitoring System API",
    "description": "Complete API testing collection for SMS with all endpoints including Admin, HOD, Faculty, and Student operations",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost/sms/api",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "admin_email",
      "value": "admin@gmail.com",
      "type": "string"
    },
    {
      "key": "admin_password",
      "value": "adminpass",
      "type": "string"
    },
    {
      "key": "hod_email",
      "value": "hod.cse@gmail.com",
      "type": "string"
    },
    {
      "key": "hod_password",
      "value": "adminpass",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Admin Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.collectionVariables.set(\"jwt_token\", responseJson.token);",
                  "    pm.test(\"Login successful\", function () {",
                  "        pm.expect(responseJson.token).to.not.be.undefined;",
                  "    });",
                  "} else {",
                  "    pm.test(\"Login failed\", function () {",
                  "        pm.expect(pm.response.code).to.equal(200);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"{{admin_email}}\",\n    \"password\": \"{{admin_password}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "HOD Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.collectionVariables.set(\"jwt_token\", responseJson.token);",
                  "    pm.test(\"HOD Login successful\", function () {",
                  "        pm.expect(responseJson.token).to.not.be.undefined;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"{{hod_email}}\",\n    \"password\": \"{{hod_password}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "Get Current User Info",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            }
          },
          "response": []
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"full_name\": \"Updated Admin Name\",\n    \"email\": \"admin@gmail.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            }
          },
          "response": []
        },
        {
          "name": "Update Password",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"current_password\": \"adminpass\",\n    \"new_password\": \"newpassword123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            }
          },
          "response": []
        },
        {
          "name": "Update Profile with Password",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"full_name\": \"Updated Admin Name\",\n    \"email\": \"admin@gmail.com\",\n    \"current_password\": \"adminpass\",\n    \"new_password\": \"newpassword123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Department Management (Admin Only)",
      "item": [
        {
          "name": "Get All Departments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/departments",
              "host": ["{{base_url}}"],
              "path": ["departments"]
            }
          },
          "response": []
        },
        {
          "name": "Create Department",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.collectionVariables.set(\"new_department_id\", responseJson.department_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"department_code\": \"EEE\",\n    \"department_name\": \"Electrical and Electronic Engineering\",\n    \"hod_email\": \"hod.eee@gmail.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/departments",
              "host": ["{{base_url}}"],
              "path": ["departments"]
            }
          },
          "response": []
        },
        {
          "name": "Get Department by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/departments/1",
              "host": ["{{base_url}}"],
              "path": ["departments", "1"]
            }
          },
          "response": []
        },
        {
          "name": "Update Department",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"department_name\": \"Computer Science & Engineering (Updated)\",\n    \"hod_email\": \"newhod.cse@gmail.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/departments/1",
              "host": ["{{base_url}}"],
              "path": ["departments", "1"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Department",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/departments/{{new_department_id}}",
              "host": ["{{base_url}}"],
              "path": ["departments", "{{new_department_id}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "User Management (HOD Only)",
      "item": [
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users",
              "host": ["{{base_url}}"],
              "path": ["users"]
            }
          },
          "response": []
        },
        {
          "name": "Create Single User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.collectionVariables.set(\"new_user_id\", responseJson.user_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_type\": \"FACULTY\",\n    \"email\": \"new.faculty@gmail.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users",
              "host": ["{{base_url}}"],
              "path": ["users"]
            }
          },
          "response": []
        },
        {
          "name": "Create Bulk Users",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"users\": [\n        {\n            \"user_type\": \"STUDENT\",\n            \"email\": \"student1@gmail.com\"\n        },\n        {\n            \"user_type\": \"FACULTY\",\n            \"email\": \"faculty1@gmail.com\"\n        },\n        {\n            \"user_type\": \"STAFF\",\n            \"email\": \"staff1@gmail.com\"\n        }\n    ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/bulk",
              "host": ["{{base_url}}"],
              "path": ["users", "bulk"]
            }
          },
          "response": []
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"full_name\": \"Updated Faculty Name\",\n    \"user_type\": \"FACULTY\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/{{new_user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "{{new_user_id}}"]
            }
          },
          "response": []
        },
        {
          "name": "Activate Users",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_ids\": [5, 6, 7]\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/activate",
              "host": ["{{base_url}}"],
              "path": ["users", "activate"]
            }
          },
          "response": []
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/{{new_user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "{{new_user_id}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Programme Management (HOD Only)",
      "item": [
        {
          "name": "Get All Programmes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/programmes",
              "host": ["{{base_url}}"],
              "path": ["programmes"]
            }
          },
          "response": []
        },
        {
          "name": "Create Programme",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.collectionVariables.set(\"new_programme_id\", responseJson.programme_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"programme_name\": \"PhD Computer Science\",\n    \"degree_level_id\": 3,\n    \"minimum_duration_years\": 3,\n    \"maximum_duration_years\": 6\n}"
            },
            "url": {
              "raw": "{{base_url}}/programmes",
              "host": ["{{base_url}}"],
              "path": ["programmes"]
            }
          },
          "response": []
        },
        {
          "name": "Update Programme",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"is_active\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/programmes/{{new_programme_id}}",
              "host": ["{{base_url}}"],
              "path": ["programmes", "{{new_programme_id}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Programme",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/programmes/{{new_programme_id}}",
              "host": ["{{base_url}}"],
              "path": ["programmes", "{{new_programme_id}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Batch Management (HOD Only)",
      "item": [
        {
          "name": "Get All Batches",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/batches",
              "host": ["{{base_url}}"],
              "path": ["batches"]
            }
          },
          "response": []
        },
        {
          "name": "Create Batch",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.collectionVariables.set(\"new_batch_id\", responseJson.batch_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"programme_id\": 1,\n    \"batch_name\": \"2024 Autumn Batch\",\n    \"start_year\": 2024,\n    \"start_semester\": \"AUTUMN\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/batches",
              "host": ["{{base_url}}"],
              "path": ["batches"]
            }
          },
          "response": []
        },
        {
          "name": "Update Batch",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"is_active\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/batches/{{new_batch_id}}",
              "host": ["{{base_url}}"],
              "path": ["batches", "{{new_batch_id}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Batch",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/batches/{{new_batch_id}}",
              "host": ["{{base_url}}"],
              "path": ["batches", "{{new_batch_id}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Error Testing",
      "item": [
        {
          "name": "Test Unauthorized Access",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/departments",
              "host": ["{{base_url}}"],
              "path": ["departments"]
            }
          },
          "response": []
        },
        {
          "name": "Test Invalid Endpoint",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/invalid-endpoint",
              "host": ["{{base_url}}"],
              "path": ["invalid-endpoint"]
            }
          },
          "response": []
        },
        {
          "name": "Test Invalid JSON",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ invalid json }"
            },
            "url": {
              "raw": "{{base_url}}/departments",
              "host": ["{{base_url}}"],
              "path": ["departments"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
